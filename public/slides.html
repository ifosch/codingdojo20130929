<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.10: http://docutils.sourceforge.net/" />
<meta name="version" content="S5 1.1" />
<title>Coding Dojo Setembre</title>
<style type="text/css">

/*
:Author: David Goodger (goodger@python.org)
:Id: $Id: html4css1.css 7514 2012-09-14 14:27:12Z milde $
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

object[type="image/svg+xml"], object[type="application/x-shockwave-flash"] {
  overflow: hidden;
}

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title, .code .error {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin: 0 0 0.5em 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left, .figure.align-left, object.align-left {
  clear: left ;
  float: left ;
  margin-right: 1em }

img.align-right, .figure.align-right, object.align-right {
  clear: right ;
  float: right ;
  margin-left: 1em }

img.align-center, .figure.align-center, object.align-center {
  display: block;
  margin-left: auto;
  margin-right: auto;
}

.align-left {
  text-align: left }

.align-center {
  clear: both ;
  text-align: center }

.align-right {
  text-align: right }

/* reset inner alignment in figures */
div.align-right {
  text-align: inherit }

/* div.align-center * { */
/*   text-align: left } */

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font: inherit }

pre.literal-block, pre.doctest-block, pre.math, pre.code {
  margin-left: 2em ;
  margin-right: 2em }

pre.code .ln { color: grey; } /* line numbers */
pre.code, code { background-color: #eeeeee }
pre.code .comment, code .comment { color: #5C6576 }
pre.code .keyword, code .keyword { color: #3B0D06; font-weight: bold }
pre.code .literal.string, code .literal.string { color: #0C5404 }
pre.code .name.builtin, code .name.builtin { color: #352B84 }
pre.code .deleted, code .deleted { background-color: #DEB0A1}
pre.code .inserted, code .inserted { background-color: #A3D289}

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

ul.auto-toc {
  list-style-type: none }

</style>
<!-- configuration parameters -->
<meta name="defaultView" content="slideshow" />
<meta name="controlVis" content="hidden" />
<!-- style sheet links -->
<script src="ui/default/slides.js" type="text/javascript"></script>
<link rel="stylesheet" href="ui/default/slides.css"
      type="text/css" media="projection" id="slideProj" />
<link rel="stylesheet" href="ui/default/outline.css"
      type="text/css" media="screen" id="outlineStyle" />
<link rel="stylesheet" href="ui/default/print.css"
      type="text/css" media="print" id="slidePrint" />
<link rel="stylesheet" href="ui/default/opera.css"
      type="text/css" media="projection" id="operaFix" />

<style type="text/css">
#currentSlide {display: none;}
</style>
</head>
<body>
<div class="layout">
<div id="controls"></div>
<div id="currentSlide"></div>
<div id="header">

</div>
<div id="footer">
<h1>Coding Dojo Setembre</h1>

</div>
</div>
<div class="presentation">
<div class="slide" id="slide0">
<h1 class="title">Coding Dojo Setembre</h1>
<h2 class="subtitle" id="informacio-pel-coding-dojo">Informació pel coding dojo</h2>


</div>
<div class="slide" id="definicio">
<h1>Definició</h1>
<p>Un test double és un element de codi que es fa servir en un test, per testejar-ne un altre element. El seu nom ve dels stunt doubles, especialistes en cinema que doblen l'actor en les escenes amb alguna complexitat.</p>
</div>
<div class="slide" id="motius">
<h1>Motius</h1>
<p>El motiu principal és la depedència del codi que es vol testejar d'altres elements:</p>
<ul class="simple">
<li>No són disponibles</li>
<li>Són indeterministes</li>
<li>Són massa complicats de configurar per cada test</li>
<li>Impliquen recursos no disponibles en fer els tests</li>
</ul>
</div>
<div class="slide" id="tipus">
<h1>Tipus</h1>
<ul>
<li><dl class="first docutils">
<dt>Dummy</dt>
<dd><p class="first last">L'element no s'utilitza mai, només es fa servir per completar el pas de
paràmetres.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Fake</dt>
<dd><p class="first last">L'element es pot utilitzar, però les seves respostes no contenen la lògica
requerida per producció.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Stub</dt>
<dd><p class="first last">L'element s'utilitza, sense que hi hagi la lògica implementada, però solen
recollir informació sobre les crides que se'ls hi fa.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Mock</dt>
<dd><p class="first last">S'utilitzen per verificar-ne el comportament d'una forma menys laboriosa
que un stub. Es crea l'element, es configura per donar les respostes
corresponents i, un cop fet el test, es valida que n'ha tingut les crides
corresponents.</p>
</dd>
</dl>
</li>
</ul>
</div>
<div class="slide" id="exemple-dummy">
<h1>Exemple: Dummy</h1>
<p>El codi que es vol testejar requereix paràmetres peró no s'utilitzen:</p>
<pre class="literal-block">
BCN = 'Barcelona'
MAD = 'Madrid'

class TestCarMovement(unittest.TestCase):

    def setUp(self):
        self.car = Car(city=BCN)
</pre>
</div>
<div class="slide" id="exemple-dummy-ii">
<h1>Exemple: Dummy (II)</h1>
<pre class="literal-block">
def test_travel(self):
        self.assertEquals(self.car.city, BCN)
        self.car.goesTo(MAD)
        self.assertEquals(self.car.city, MAD)
</pre>
</div>
<div class="slide" id="exemple-fake">
<h1>Exemple: Fake</h1>
<p>El codi que es vol testejar necessita que un altre element respongui d'una manera determinada:</p>
<pre class="literal-block">
class gps(object):

    def validate(self, location, city):
        return city == BCN
</pre>
</div>
<div class="slide" id="exemple-fake-ii">
<h1>Exemple: Fake (II)</h1>
<pre class="literal-block">
class TestCarLocation(unittest.TestCase):

    def setUp(self):
        self.gps = gps()
        self.car1 = Car(location=(46, 40), city=BCN)
        self.car2 = Car(location=(46, 40), city=MAD)
</pre>
</div>
<div class="slide" id="exemple-fake-iii">
<h1>Exemple: Fake (III)</h1>
<pre class="literal-block">
def test_GPS(self):
    self.assertTrue(self.gps.validate(
        self.car1.location,
        self.car1.city))
    self.assertFalse(self.gps.validate(
        self.car2.location,
        self.car2.city))
</pre>
</div>
<div class="slide" id="exemple-stub">
<h1>Exemple: Stub</h1>
<p>El codi té lógica implementada per controlar les crides que se'ls hi fa:</p>
<pre class="literal-block">
class Garage(object):

    def __init__(self):
        self.count = 0

    def repair(self, car):
        self.count += 1
</pre>
</div>
<div class="slide" id="exemple-stub-ii">
<h1>Exemple: Stub (II)</h1>
<pre class="literal-block">
class TestCarTechCheck(unittest.TestCase):

    def setUp(self):
        self.garage = Garage()
        self.car1 = Car()
        self.car2 = Car(kms=10000)

    def test_addKms(self):
        self.car1.addKms(10000)
        self.car2.addKms(5000)
        self.assertEquals(self.garage.count, 1)
</pre>
</div>
<div class="slide" id="exemple-mock">
<h1>Exemple: Mock</h1>
<p>El test valida el comportament:</p>
<pre class="literal-block">
from unittest.mock import Mock

class TestCarTechCheck2(unittest.TestCase):

    def setUp(self):
        self.garage = Mock()
        self.garage.repair = Mock()
        self.car1 = Car(garage=self.garage)
        self.car2 = Car(garage=self.garage, kms=10000)
</pre>
</div>
<div class="slide" id="exemple-mock-ii">
<h1>Exemple: Mock (II)</h1>
<pre class="literal-block">
def test_addKms(self):
    self.car1.addKms(10000)
    self.car2.addKms(5000)
    self.garage.repair.assert_called_once_with(self.car2)
</pre>
</div>
<div class="slide" id="enllacos">
<h1>Enllaços</h1>
<ul class="simple">
<li><a class="reference external" href="http://martinfowler.com/articles/mocksArentStubs.html">Mocks Aren't Stubs</a>, de Martin Fowler</li>
<li><a class="reference external" href="http://blog.willbeattie.net/2009/07/role-of-mocking-in-tdd-test-first-with.html">The role of Mocking in TDD, Test First with Rhino Mocks, KandaAlpha</a>, de Will Beattie</li>
<li><a class="reference external" href="http://juan-garcia-carmona.blogspot.com.es/2012/09/introduccion-los-tests-unitarios-tdd-y.html">Introducción a los Tests Unitarios, TDD y Mocking</a>, de Juan García Ramona</li>
</ul>
</div>
<div class="slide" id="preguntes">
<h1>Preguntes</h1>
<p>Gràcies!</p>
</div>
</div>
</body>
</html>
